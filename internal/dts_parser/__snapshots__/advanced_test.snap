
[TestIndexedAccessTypes/simple_indexed_access - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:4},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:3},
            End:      ast.Location{Line:1, Column:4},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:5},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/indexed_with_number_literal - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.LiteralType{
        Literal: &dts_parser.NumberLiteral{
            Value: 0,
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:4},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:3},
            End:      ast.Location{Line:1, Column:4},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:5},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/nested_indexed_access - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:1},
                    End:      ast.Location{Line:1, Column:2},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:3},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:4},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:5},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "P",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:6},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:6},
            End:      ast.Location{Line:1, Column:7},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:8},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/indexed_access_with_union - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.UnionType{
        Types: {
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:3},
                        End:      ast.Location{Line:1, Column:4},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:3},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "P",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:7},
                        End:      ast.Location{Line:1, Column:8},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:3},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:9},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/indexed_access_of_array - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.ArrayType{
        ElementType: &dts_parser.PrimitiveType{
            Kind: 6,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        Readonly: false,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:9},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.LiteralType{
        Literal: &dts_parser.NumberLiteral{
            Value: 0,
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:10},
            End:      ast.Location{Line:1, Column:11},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/indexed_access_with_qualified_name - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Member{
            Left: &dts_parser.Ident{
                Name: "Foo",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:1},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            Right: &dts_parser.Ident{
                Name: "Bar",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:5},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:9},
            End:      ast.Location{Line:1, Column:10},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:11},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/multiple_levels - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:1},
                        End:      ast.Location{Line:1, Column:2},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:1},
                    End:      ast.Location{Line:1, Column:2},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:3},
                        End:      ast.Location{Line:1, Column:4},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:3},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "P",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:6},
                    End:      ast.Location{Line:1, Column:7},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:6},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Q",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:9},
            End:      ast.Location{Line:1, Column:10},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:11},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/indexed_with_keyof - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.KeyOfType{
        Type: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "U",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:9},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:3},
            End:      ast.Location{Line:1, Column:10},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:11},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/complex_nested - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Record",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:8},
                    End:      ast.Location{Line:1, Column:14},
                    SourceID: 0,
                },
            },
            &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:16},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:23},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:24},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:24},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:26},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/simple_conditional - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:12},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "X",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:15},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:15},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Y",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:20},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:20},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/conditional_with_primitives - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.PrimitiveType{
        Kind: 6,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:17},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.LiteralType{
        Literal: &dts_parser.BooleanLiteral{
            Value: true,
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:20},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.LiteralType{
        Literal: &dts_parser.BooleanLiteral{
            Value: false,
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:27},
                End:      ast.Location{Line:1, Column:32},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:27},
            End:      ast.Location{Line:1, Column:32},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:32},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/nested_conditional_true_branch - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:12},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.ParenthesizedType{
        Type: &dts_parser.ConditionalType{
            CheckType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "X",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:16},
                        End:      ast.Location{Line:1, Column:17},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:16},
                    End:      ast.Location{Line:1, Column:17},
                    SourceID: 0,
                },
            },
            ExtendsType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Y",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:26},
                        End:      ast.Location{Line:1, Column:27},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:26},
                    End:      ast.Location{Line:1, Column:27},
                    SourceID: 0,
                },
            },
            TrueType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "A",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:30},
                        End:      ast.Location{Line:1, Column:31},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:30},
                    End:      ast.Location{Line:1, Column:31},
                    SourceID: 0,
                },
            },
            FalseType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "B",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:34},
                        End:      ast.Location{Line:1, Column:35},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:34},
                    End:      ast.Location{Line:1, Column:35},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:16},
                End:      ast.Location{Line:1, Column:35},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:15},
            End:      ast.Location{Line:1, Column:36},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Z",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:39},
                End:      ast.Location{Line:1, Column:40},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:39},
            End:      ast.Location{Line:1, Column:40},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:40},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/nested_conditional_false_branch - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:12},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "X",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:15},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:15},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.ParenthesizedType{
        Type: &dts_parser.ConditionalType{
            CheckType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Y",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:20},
                        End:      ast.Location{Line:1, Column:21},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:21},
                    SourceID: 0,
                },
            },
            ExtendsType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Z",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:30},
                        End:      ast.Location{Line:1, Column:31},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:30},
                    End:      ast.Location{Line:1, Column:31},
                    SourceID: 0,
                },
            },
            TrueType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "A",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:34},
                        End:      ast.Location{Line:1, Column:35},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:34},
                    End:      ast.Location{Line:1, Column:35},
                    SourceID: 0,
                },
            },
            FalseType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "B",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:38},
                        End:      ast.Location{Line:1, Column:39},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:38},
                    End:      ast.Location{Line:1, Column:39},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:39},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:40},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:40},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/conditional_with_intersection_check - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.IntersectionType{
        Types: {
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "U",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:11},
                        End:      ast.Location{Line:1, Column:12},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:11},
                    End:      ast.Location{Line:1, Column:12},
                    SourceID: 0,
                },
            },
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "V",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "X",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:20},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Y",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:23},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:24},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/conditional_with_array - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.ArrayType{
        ElementType: &dts_parser.PrimitiveType{
            Kind: 0,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:14},
                SourceID: 0,
            },
        },
        Readonly: false,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:20},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.PrimitiveType{
            Kind: 7,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:21},
                End:      ast.Location{Line:1, Column:27},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:28},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:32},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:31},
            End:      ast.Location{Line:1, Column:32},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:32},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/conditional_with_infer - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Array",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:23},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    Constraint: nil,
                    Default:    nil,
                    span:       ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:24},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:28},
                End:      ast.Location{Line:1, Column:29},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:28},
            End:      ast.Location{Line:1, Column:29},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:32},
                End:      ast.Location{Line:1, Column:33},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:32},
            End:      ast.Location{Line:1, Column:33},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:33},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/multiple_infer - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "arg",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:15},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:23},
                                End:      ast.Location{Line:1, Column:24},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:17},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:24},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:35},
                        End:      ast.Location{Line:1, Column:36},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:29},
                    End:      ast.Location{Line:1, Column:36},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:29},
                End:      ast.Location{Line:1, Column:36},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:36},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "R",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:39},
                End:      ast.Location{Line:1, Column:40},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:39},
            End:      ast.Location{Line:1, Column:40},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:43},
            End:      ast.Location{Line:1, Column:48},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:48},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/complex_nested - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.ObjectType{
        Members: {
            &dts_parser.PropertySignature{
                Name: &dts_parser.Ident{
                    Name: "a",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:13},
                        End:      ast.Location{Line:1, Column:14},
                        SourceID: 0,
                    },
                },
                TypeAnn: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "U",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:22},
                                End:      ast.Location{Line:1, Column:23},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:16},
                            End:      ast.Location{Line:1, Column:23},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:16},
                        End:      ast.Location{Line:1, Column:23},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Readonly: false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:13},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
            &dts_parser.PropertySignature{
                Name: &dts_parser.Ident{
                    Name: "b",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:25},
                        End:      ast.Location{Line:1, Column:26},
                        SourceID: 0,
                    },
                },
                TypeAnn: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "V",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:34},
                                End:      ast.Location{Line:1, Column:35},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:28},
                            End:      ast.Location{Line:1, Column:35},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:28},
                        End:      ast.Location{Line:1, Column:35},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Readonly: false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:25},
                    End:      ast.Location{Line:1, Column:35},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:37},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:41},
                            End:      ast.Location{Line:1, Column:42},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:41},
                        End:      ast.Location{Line:1, Column:42},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:41},
                    End:      ast.Location{Line:1, Column:42},
                    SourceID: 0,
                },
            },
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "V",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:44},
                            End:      ast.Location{Line:1, Column:45},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:44},
                        End:      ast.Location{Line:1, Column:45},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:44},
                    End:      ast.Location{Line:1, Column:45},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:40},
            End:      ast.Location{Line:1, Column:46},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:49},
            End:      ast.Location{Line:1, Column:54},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:54},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_in_conditional - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Array",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:23},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    Constraint: nil,
                    Default:    nil,
                    span:       ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:24},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:28},
                End:      ast.Location{Line:1, Column:29},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:28},
            End:      ast.Location{Line:1, Column:29},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:32},
            End:      ast.Location{Line:1, Column:37},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:37},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_in_function - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "args",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:19},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.ArrayType{
                    ElementType: &dts_parser.PrimitiveType{
                        Kind: 0,
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:21},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    Readonly: false,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:21},
                        End:      ast.Location{Line:1, Column:26},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     true,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:37},
                        End:      ast.Location{Line:1, Column:38},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:31},
                    End:      ast.Location{Line:1, Column:38},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:38},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:38},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "R",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:41},
                End:      ast.Location{Line:1, Column:42},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:41},
            End:      ast.Location{Line:1, Column:42},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 0,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:45},
            End:      ast.Location{Line:1, Column:48},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:48},
        SourceID: 0,
    },
}
---

[TestInferTypes/multiple_infer - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "a",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:13},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:21},
                                End:      ast.Location{Line:1, Column:22},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:15},
                            End:      ast.Location{Line:1, Column:22},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:22},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "b",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:24},
                        End:      ast.Location{Line:1, Column:25},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "B",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:33},
                                End:      ast.Location{Line:1, Column:34},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:27},
                            End:      ast.Location{Line:1, Column:34},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:27},
                        End:      ast.Location{Line:1, Column:34},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:34},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:45},
                        End:      ast.Location{Line:1, Column:46},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:39},
                    End:      ast.Location{Line:1, Column:46},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:39},
                End:      ast.Location{Line:1, Column:46},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:46},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "A",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:50},
                            End:      ast.Location{Line:1, Column:51},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:50},
                        End:      ast.Location{Line:1, Column:51},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:50},
                    End:      ast.Location{Line:1, Column:51},
                    SourceID: 0,
                },
            },
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "B",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:53},
                            End:      ast.Location{Line:1, Column:54},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:53},
                        End:      ast.Location{Line:1, Column:54},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:53},
                    End:      ast.Location{Line:1, Column:54},
                    SourceID: 0,
                },
            },
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "R",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:56},
                            End:      ast.Location{Line:1, Column:57},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:56},
                        End:      ast.Location{Line:1, Column:57},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:56},
                    End:      ast.Location{Line:1, Column:57},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:49},
            End:      ast.Location{Line:1, Column:58},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:61},
            End:      ast.Location{Line:1, Column:66},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:66},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_in_object - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.ObjectType{
        Members: {
            &dts_parser.PropertySignature{
                Name: &dts_parser.Ident{
                    Name: "a",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:13},
                        End:      ast.Location{Line:1, Column:14},
                        SourceID: 0,
                    },
                },
                TypeAnn: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:22},
                                End:      ast.Location{Line:1, Column:23},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:16},
                            End:      ast.Location{Line:1, Column:23},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:16},
                        End:      ast.Location{Line:1, Column:23},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Readonly: false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:13},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "A",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:28},
                End:      ast.Location{Line:1, Column:29},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:28},
            End:      ast.Location{Line:1, Column:29},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:32},
            End:      ast.Location{Line:1, Column:37},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:37},
        SourceID: 0,
    },
}
---

[TestInferTypes/nested_infer - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Promise",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:18},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:25},
                            End:      ast.Location{Line:1, Column:26},
                            SourceID: 0,
                        },
                    },
                    Constraint: nil,
                    Default:    nil,
                    span:       ast.Span{
                        Start:    ast.Location{Line:1, Column:19},
                        End:      ast.Location{Line:1, Column:26},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:27},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.ParenthesizedType{
        Type: &dts_parser.ConditionalType{
            CheckType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "U",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:31},
                        End:      ast.Location{Line:1, Column:32},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:31},
                    End:      ast.Location{Line:1, Column:32},
                    SourceID: 0,
                },
            },
            ExtendsType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Array",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:41},
                        End:      ast.Location{Line:1, Column:46},
                        SourceID: 0,
                    },
                },
                TypeArgs: {
                    &dts_parser.InferType{
                        TypeParam: &dts_parser.TypeParam{
                            Name: &dts_parser.Ident{
                                Name: "V",
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:53},
                                    End:      ast.Location{Line:1, Column:54},
                                    SourceID: 0,
                                },
                            },
                            Constraint: nil,
                            Default:    nil,
                            span:       ast.Span{
                                Start:    ast.Location{Line:1, Column:47},
                                End:      ast.Location{Line:1, Column:54},
                                SourceID: 0,
                            },
                        },
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:47},
                            End:      ast.Location{Line:1, Column:54},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:41},
                    End:      ast.Location{Line:1, Column:55},
                    SourceID: 0,
                },
            },
            TrueType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "V",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:58},
                        End:      ast.Location{Line:1, Column:59},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:58},
                    End:      ast.Location{Line:1, Column:59},
                    SourceID: 0,
                },
            },
            FalseType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "U",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:62},
                        End:      ast.Location{Line:1, Column:63},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:62},
                    End:      ast.Location{Line:1, Column:63},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:63},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:30},
            End:      ast.Location{Line:1, Column:64},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:67},
                End:      ast.Location{Line:1, Column:68},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:67},
            End:      ast.Location{Line:1, Column:68},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:68},
        SourceID: 0,
    },
}
---

[TestMappedTypes/simple_mapped_type - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:9},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:10},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:14},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:13},
            End:      ast.Location{Line:1, Column:14},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:16},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_keyof - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:20},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:21},
                End:      ast.Location{Line:1, Column:22},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:23},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:25},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_readonly - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:14},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:24},
                        End:      ast.Location{Line:1, Column:25},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:25},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:18},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:13},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:28},
                    End:      ast.Location{Line:1, Column:29},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:28},
                End:      ast.Location{Line:1, Column:29},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:30},
                    End:      ast.Location{Line:1, Column:31},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:30},
                End:      ast.Location{Line:1, Column:31},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:28},
            End:      ast.Location{Line:1, Column:32},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 1,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:34},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_optional - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:21},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:21},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:22},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:22},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:20},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    Optional: 1,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:26},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_both_modifiers - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:14},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:24},
                        End:      ast.Location{Line:1, Column:25},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:25},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:18},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:13},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:29},
                    End:      ast.Location{Line:1, Column:30},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:29},
                End:      ast.Location{Line:1, Column:30},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:31},
                    End:      ast.Location{Line:1, Column:32},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:32},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:29},
            End:      ast.Location{Line:1, Column:33},
            SourceID: 0,
        },
    },
    Optional: 1,
    Readonly: 1,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:35},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_add_modifiers - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:14},
                End:      ast.Location{Line:1, Column:15},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:25},
                        End:      ast.Location{Line:1, Column:26},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:25},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:26},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:14},
            End:      ast.Location{Line:1, Column:26},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:31},
                    End:      ast.Location{Line:1, Column:32},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:32},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:33},
                    End:      ast.Location{Line:1, Column:34},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:33},
                End:      ast.Location{Line:1, Column:34},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:31},
            End:      ast.Location{Line:1, Column:35},
            SourceID: 0,
        },
    },
    Optional: 1,
    Readonly: 1,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:37},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_remove_modifiers - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:14},
                End:      ast.Location{Line:1, Column:15},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:25},
                        End:      ast.Location{Line:1, Column:26},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:25},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:26},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:14},
            End:      ast.Location{Line:1, Column:26},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:31},
                    End:      ast.Location{Line:1, Column:32},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:32},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:33},
                    End:      ast.Location{Line:1, Column:34},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:33},
                End:      ast.Location{Line:1, Column:34},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:31},
            End:      ast.Location{Line:1, Column:35},
            SourceID: 0,
        },
    },
    Optional: 2,
    Readonly: 2,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:37},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_complex_value - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.ConditionalType{
        CheckType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:19},
                        End:      ast.Location{Line:1, Column:20},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:20},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:21},
                        End:      ast.Location{Line:1, Column:22},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
        ExtendsType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "Function",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:32},
                    End:      ast.Location{Line:1, Column:40},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:32},
                End:      ast.Location{Line:1, Column:40},
                SourceID: 0,
            },
        },
        TrueType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:43},
                    End:      ast.Location{Line:1, Column:44},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:43},
                End:      ast.Location{Line:1, Column:44},
                SourceID: 0,
            },
        },
        FalseType: &dts_parser.PrimitiveType{
            Kind: 5,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:47},
                End:      ast.Location{Line:1, Column:52},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:52},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:54},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/empty_template - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:3},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_identifier - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:8},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_object - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.ObjectType{
        Members: {
            &dts_parser.PropertySignature{
                Name: &dts_parser.Ident{
                    Name: "a",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:9},
                        End:      ast.Location{Line:1, Column:10},
                        SourceID: 0,
                    },
                },
                TypeAnn: &dts_parser.PrimitiveType{
                    Kind: 6,
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:18},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Readonly: false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:9},
                    End:      ast.Location{Line:1, Column:18},
                    SourceID: 0,
                },
            },
            &dts_parser.PropertySignature{
                Name: &dts_parser.Ident{
                    Name: "b",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:20},
                        End:      ast.Location{Line:1, Column:21},
                        SourceID: 0,
                    },
                },
                TypeAnn: &dts_parser.PrimitiveType{
                    Kind: 7,
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:23},
                        End:      ast.Location{Line:1, Column:29},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Readonly: false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:29},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:31},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:31},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_array - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.ArrayType{
        ElementType: &dts_parser.PrimitiveType{
            Kind: 6,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:13},
                SourceID: 0,
            },
        },
        Readonly: false,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:15},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:15},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_union - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.ParenthesizedType{
        Type: &dts_parser.UnionType{
            Types: {
                &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "T",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:8},
                            End:      ast.Location{Line:1, Column:9},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:8},
                        End:      ast.Location{Line:1, Column:9},
                        SourceID: 0,
                    },
                },
                &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:12},
                            End:      ast.Location{Line:1, Column:13},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:13},
                        SourceID: 0,
                    },
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:8},
                End:      ast.Location{Line:1, Column:13},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:14},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:14},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_with_indexed_access - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:9},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:11},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:11},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/nested_keyof - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.KeyOfType{
        Type: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:13},
                    End:      ast.Location{Line:1, Column:14},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:14},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:14},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:14},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_in_union - 1]
&dts_parser.UnionType{
    Types: {
        &dts_parser.PrimitiveType{
            Kind: 6,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:16},
                        End:      ast.Location{Line:1, Column:17},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:16},
                    End:      ast.Location{Line:1, Column:17},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:17},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:17},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_qualified_name - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.TypeReference{
        Name: &dts_parser.Member{
            Left: &dts_parser.Ident{
                Name: "Foo",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            Right: &dts_parser.Ident{
                Name: "Bar",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:11},
                    End:      ast.Location{Line:1, Column:14},
                    SourceID: 0,
                },
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:14},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:14},
        SourceID: 0,
    },
}
---

[TestTypeOfTypes/typeof_identifier - 1]
&dts_parser.TypeOfType{
    Expr: &dts_parser.Ident{
        Name: "foo",
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:8},
            End:      ast.Location{Line:1, Column:11},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:11},
        SourceID: 0,
    },
}
---

[TestTypeOfTypes/typeof_qualified_name - 1]
&dts_parser.TypeOfType{
    Expr: &dts_parser.Member{
        Left: &dts_parser.Ident{
            Name: "Foo",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:8},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
        Right: &dts_parser.Ident{
            Name: "bar",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:12},
                End:      ast.Location{Line:1, Column:15},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:15},
        SourceID: 0,
    },
}
---

[TestTypeOfTypes/typeof_nested - 1]
&dts_parser.TypeOfType{
    Expr: &dts_parser.Member{
        Left: &dts_parser.Member{
            Left: &dts_parser.Ident{
                Name: "Foo",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:8},
                    End:      ast.Location{Line:1, Column:11},
                    SourceID: 0,
                },
            },
            Right: &dts_parser.Ident{
                Name: "Bar",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:15},
                    SourceID: 0,
                },
            },
        },
        Right: &dts_parser.Ident{
            Name: "baz",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:16},
                End:      ast.Location{Line:1, Column:19},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:19},
        SourceID: 0,
    },
}
---

[TestTypeOfTypes/typeof_in_union - 1]
&dts_parser.UnionType{
    Types: {
        &dts_parser.PrimitiveType{
            Kind: 6,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        &dts_parser.TypeOfType{
            Expr: &dts_parser.Ident{
                Name: "foo",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:20},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:20},
        SourceID: 0,
    },
}
---

[TestTypeOfTypes/typeof_array_access - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeOfType{
        Expr: &dts_parser.Ident{
            Name: "foo",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:8},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:11},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.LiteralType{
        Literal: &dts_parser.NumberLiteral{
            Value: 0,
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:12},
                End:      ast.Location{Line:1, Column:13},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:12},
            End:      ast.Location{Line:1, Column:13},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:14},
        SourceID: 0,
    },
}
---

[TestImportTypes/simple_import - 1]
&dts_parser.ImportType{
    Module:   "module",
    Name:     nil,
    TypeArgs: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:17},
        SourceID: 0,
    },
}
---

[TestImportTypes/import_with_member - 1]
&dts_parser.ImportType{
    Module: "module",
    Name:   &dts_parser.Ident{
        Name: "Type",
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:18},
            End:      ast.Location{Line:1, Column:22},
            SourceID: 0,
        },
    },
    TypeArgs: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:22},
        SourceID: 0,
    },
}
---

[TestImportTypes/import_with_nested_member - 1]
&dts_parser.ImportType{
    Module: "module",
    Name:   &dts_parser.Member{
        Left: &dts_parser.Ident{
            Name: "Foo",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:18},
                End:      ast.Location{Line:1, Column:21},
                SourceID: 0,
            },
        },
        Right: &dts_parser.Ident{
            Name: "Bar",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:22},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
    },
    TypeArgs: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:25},
        SourceID: 0,
    },
}
---

[TestImportTypes/import_with_type_args - 1]
&dts_parser.ImportType{
    Module: "module",
    Name:   &dts_parser.Ident{
        Name: "Type",
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:18},
            End:      ast.Location{Line:1, Column:22},
            SourceID: 0,
        },
    },
    TypeArgs: {
        &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:23},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:25},
        SourceID: 0,
    },
}
---

[TestImportTypes/import_with_multiple_type_args - 1]
&dts_parser.ImportType{
    Module: "module",
    Name:   &dts_parser.Ident{
        Name: "Generic",
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:18},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    TypeArgs: {
        &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:26},
                    End:      ast.Location{Line:1, Column:27},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:26},
                End:      ast.Location{Line:1, Column:27},
                SourceID: 0,
            },
        },
        &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "U",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:29},
                    End:      ast.Location{Line:1, Column:30},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:29},
                End:      ast.Location{Line:1, Column:30},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:31},
        SourceID: 0,
    },
}
---

[TestImportTypes/import_in_union - 1]
&dts_parser.UnionType{
    Types: {
        &dts_parser.PrimitiveType{
            Kind: 6,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        &dts_parser.ImportType{
            Module: "module",
            Name:   &dts_parser.Ident{
                Name: "Type",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:27},
                    End:      ast.Location{Line:1, Column:31},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:31},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:31},
        SourceID: 0,
    },
}
---

[TestThisType/this_type_alone - 1]
&dts_parser.ThisType{
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:5},
        SourceID: 0,
    },
}
---

[TestThisType/this_in_union - 1]
&dts_parser.UnionType{
    Types: {
        &dts_parser.ThisType{
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        &dts_parser.PrimitiveType{
            Kind: 3,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:8},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestThisType/this_in_intersection - 1]
&dts_parser.IntersectionType{
    Types: {
        &dts_parser.ThisType{
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:8},
                    End:      ast.Location{Line:1, Column:9},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:8},
                End:      ast.Location{Line:1, Column:9},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:9},
        SourceID: 0,
    },
}
---

[TestThisType/this_array - 1]
&dts_parser.ArrayType{
    ElementType: &dts_parser.ThisType{
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:5},
            SourceID: 0,
        },
    },
    Readonly: false,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:7},
        SourceID: 0,
    },
}
---

[TestRestType/rest_string - 1]
&dts_parser.RestType{
    Type: &dts_parser.PrimitiveType{
        Kind: 6,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:10},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:10},
        SourceID: 0,
    },
}
---

[TestRestType/rest_array - 1]
&dts_parser.RestType{
    Type: &dts_parser.ArrayType{
        ElementType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:4},
                    End:      ast.Location{Line:1, Column:5},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Readonly: false,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:7},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:7},
        SourceID: 0,
    },
}
---

[TestRestType/rest_union - 1]
&dts_parser.RestType{
    Type: &dts_parser.ParenthesizedType{
        Type: &dts_parser.UnionType{
            Types: {
                &dts_parser.PrimitiveType{
                    Kind: 6,
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:5},
                        End:      ast.Location{Line:1, Column:11},
                        SourceID: 0,
                    },
                },
                &dts_parser.PrimitiveType{
                    Kind: 7,
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:14},
                        End:      ast.Location{Line:1, Column:20},
                        SourceID: 0,
                    },
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:5},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:21},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:21},
        SourceID: 0,
    },
}
---

[TestRestType/rest_type_ref - 1]
&dts_parser.RestType{
    Type: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Args",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:8},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Pick_utility_type - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.ConditionalType{
        CheckType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:20},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        ExtendsType: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "U",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:35},
                        End:      ast.Location{Line:1, Column:36},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:35},
                    End:      ast.Location{Line:1, Column:36},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:29},
                End:      ast.Location{Line:1, Column:36},
                SourceID: 0,
            },
        },
        TrueType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:39},
                        End:      ast.Location{Line:1, Column:40},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:39},
                    End:      ast.Location{Line:1, Column:40},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:41},
                        End:      ast.Location{Line:1, Column:42},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:41},
                    End:      ast.Location{Line:1, Column:42},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:39},
                End:      ast.Location{Line:1, Column:43},
                SourceID: 0,
            },
        },
        FalseType: &dts_parser.PrimitiveType{
            Kind: 5,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:46},
                End:      ast.Location{Line:1, Column:51},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:51},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:53},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Exclude_utility_type - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:12},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:15},
            End:      ast.Location{Line:1, Column:20},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:23},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:24},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/ReturnType_utility - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "args",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:19},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.ArrayType{
                    ElementType: &dts_parser.PrimitiveType{
                        Kind: 0,
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:21},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    Readonly: false,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:21},
                        End:      ast.Location{Line:1, Column:26},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     true,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:37},
                        End:      ast.Location{Line:1, Column:38},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:31},
                    End:      ast.Location{Line:1, Column:38},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:31},
                End:      ast.Location{Line:1, Column:38},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:38},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "R",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:41},
                End:      ast.Location{Line:1, Column:42},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:41},
            End:      ast.Location{Line:1, Column:42},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 0,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:45},
            End:      ast.Location{Line:1, Column:48},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:48},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Partial-like - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:21},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:21},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:22},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:22},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:20},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    Optional: 1,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:26},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Required-like - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:21},
                End:      ast.Location{Line:1, Column:22},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:23},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:21},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    Optional: 2,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Readonly-like - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:14},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:24},
                        End:      ast.Location{Line:1, Column:25},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:25},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:18},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:13},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:28},
                    End:      ast.Location{Line:1, Column:29},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:28},
                End:      ast.Location{Line:1, Column:29},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:30},
                    End:      ast.Location{Line:1, Column:31},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:30},
                End:      ast.Location{Line:1, Column:31},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:28},
            End:      ast.Location{Line:1, Column:32},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 1,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:34},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Record-like - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:20},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:22},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Complex_conditional_with_multiple_infer - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "a",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:13},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:21},
                                End:      ast.Location{Line:1, Column:22},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:15},
                            End:      ast.Location{Line:1, Column:22},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:22},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "b",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:24},
                        End:      ast.Location{Line:1, Column:25},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "B",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:33},
                                End:      ast.Location{Line:1, Column:34},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:27},
                            End:      ast.Location{Line:1, Column:34},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:27},
                        End:      ast.Location{Line:1, Column:34},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:34},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:45},
                        End:      ast.Location{Line:1, Column:46},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:39},
                    End:      ast.Location{Line:1, Column:46},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:39},
                End:      ast.Location{Line:1, Column:46},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:46},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.ParenthesizedType{
        Type: &dts_parser.ConditionalType{
            CheckType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "A",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:50},
                        End:      ast.Location{Line:1, Column:51},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:50},
                    End:      ast.Location{Line:1, Column:51},
                    SourceID: 0,
                },
            },
            ExtendsType: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:60},
                    End:      ast.Location{Line:1, Column:66},
                    SourceID: 0,
                },
            },
            TrueType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:69},
                        End:      ast.Location{Line:1, Column:70},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:69},
                    End:      ast.Location{Line:1, Column:70},
                    SourceID: 0,
                },
            },
            FalseType: &dts_parser.PrimitiveType{
                Kind: 5,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:73},
                    End:      ast.Location{Line:1, Column:78},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:50},
                End:      ast.Location{Line:1, Column:78},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:49},
            End:      ast.Location{Line:1, Column:79},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:82},
            End:      ast.Location{Line:1, Column:87},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:87},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Nested_mapped_and_conditional - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.ConditionalType{
        CheckType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:19},
                        End:      ast.Location{Line:1, Column:20},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:20},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:21},
                        End:      ast.Location{Line:1, Column:22},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
        ExtendsType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "Array",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:32},
                    End:      ast.Location{Line:1, Column:37},
                    SourceID: 0,
                },
            },
            TypeArgs: {
                &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "U",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:44},
                                End:      ast.Location{Line:1, Column:45},
                                SourceID: 0,
                            },
                        },
                        Constraint: nil,
                        Default:    nil,
                        span:       ast.Span{
                            Start:    ast.Location{Line:1, Column:38},
                            End:      ast.Location{Line:1, Column:45},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:38},
                        End:      ast.Location{Line:1, Column:45},
                        SourceID: 0,
                    },
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:32},
                End:      ast.Location{Line:1, Column:46},
                SourceID: 0,
            },
        },
        TrueType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "U",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:49},
                    End:      ast.Location{Line:1, Column:50},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:49},
                End:      ast.Location{Line:1, Column:50},
                SourceID: 0,
            },
        },
        FalseType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:53},
                        End:      ast.Location{Line:1, Column:54},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:53},
                    End:      ast.Location{Line:1, Column:54},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:55},
                        End:      ast.Location{Line:1, Column:56},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:55},
                    End:      ast.Location{Line:1, Column:56},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:53},
                End:      ast.Location{Line:1, Column:57},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:57},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:59},
        SourceID: 0,
    },
}
---

[TestIndexedAccessTypes/indexed_with_string_literal - 1]
&dts_parser.IndexedAccessType{
    ObjectType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    IndexType: &dts_parser.LiteralType{
        Literal: &dts_parser.StringLiteral{
            Value: "name",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:9},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:3},
            End:      ast.Location{Line:1, Column:9},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:10},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/conditional_with_union_check - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.UnionType{
        Types: {
            &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:11},
                    End:      ast.Location{Line:1, Column:17},
                    SourceID: 0,
                },
            },
            &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:26},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "X",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:29},
                End:      ast.Location{Line:1, Column:30},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:29},
            End:      ast.Location{Line:1, Column:30},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Y",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:33},
                End:      ast.Location{Line:1, Column:34},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:33},
            End:      ast.Location{Line:1, Column:34},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:34},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_in_union - 1]
&dts_parser.UnionType{
    Types: {
        &dts_parser.PrimitiveType{
            Kind: 6,
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateLiteralType{
            Parts: {
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_in_intersection - 1]
&dts_parser.IntersectionType{
    Types: {
        &dts_parser.TemplateLiteralType{
            Parts: {
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:3},
                SourceID: 0,
            },
        },
        &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:6},
                    End:      ast.Location{Line:1, Column:7},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:6},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:7},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_array - 1]
&dts_parser.ArrayType{
    ElementType: &dts_parser.TemplateLiteralType{
        Parts: {
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:3},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:5},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_as_type_arg - 1]
&dts_parser.TypeReference{
    Name: &dts_parser.Ident{
        Name: "Array",
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:6},
            SourceID: 0,
        },
    },
    TypeArgs: {
        &dts_parser.TemplateLiteralType{
            Parts: {
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:9},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:10},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypeErrors/template_with_only_backticks - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:3},
        SourceID: 0,
    },
}
---

[TestOptionalType/tuple_with_optional_at_end - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:10},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:18},
        SourceID: 0,
    },
}
---

[TestOptionalType/tuple_with_multiple_optional - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:11},
                    End:      ast.Location{Line:1, Column:17},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:17},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 8,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:27},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:27},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:29},
        SourceID: 0,
    },
}
---

[TestOptionalType/tuple_with_optional_and_required - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:10},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 8,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:26},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:26},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestOptionalType/tuple_with_labeled_optional - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: &dts_parser.Ident{
                Name: "x",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:3},
                    SourceID: 0,
                },
            },
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:5},
                    End:      ast.Location{Line:1, Column:11},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
        {
            Name: &dts_parser.Ident{
                Name: "y",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:13},
                    End:      ast.Location{Line:1, Column:14},
                    SourceID: 0,
                },
            },
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:24},
        SourceID: 0,
    },
}
---

[TestOptionalType/tuple_with_labeled_optional_before_colon - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: &dts_parser.Ident{
                Name: "x",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:3},
                    SourceID: 0,
                },
            },
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:6},
                    End:      ast.Location{Line:1, Column:12},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:13},
        SourceID: 0,
    },
}
---

[TestOptionalType/nested_tuple_with_optional - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.TupleType{
                Elements: {
                    {
                        Name: (*dts_parser.Ident)(nil),
                        Type: &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:3},
                                End:      ast.Location{Line:1, Column:9},
                                SourceID: 0,
                            },
                        },
                        Optional: true,
                        Rest:     false,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:3},
                            End:      ast.Location{Line:1, Column:9},
                            SourceID: 0,
                        },
                    },
                    {
                        Name: (*dts_parser.Ident)(nil),
                        Type: &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:12},
                                End:      ast.Location{Line:1, Column:18},
                                SourceID: 0,
                            },
                        },
                        Optional: false,
                        Rest:     false,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:12},
                            End:      ast.Location{Line:1, Column:18},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:19},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:19},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 8,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:28},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:21},
                End:      ast.Location{Line:1, Column:28},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:30},
        SourceID: 0,
    },
}
---

[TestOptionalType/mapped_with_optional_modifier - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    NameType:  nil,
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:21},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:21},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:22},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:22},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:20},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    Optional: 1,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:26},
        SourceID: 0,
    },
}
---

[TestOptionalType/mapped_with_add_optional - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    NameType:  nil,
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:21},
                End:      ast.Location{Line:1, Column:22},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:23},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:21},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    Optional: 1,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestOptionalType/mapped_with_remove_optional - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    NameType:  nil,
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:22},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:21},
                End:      ast.Location{Line:1, Column:22},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:23},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:21},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    Optional: 2,
    Readonly: 0,
    AsClause: nil,
    span:     ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestOptionalType/object_with_optional_property - 1]
&dts_parser.ObjectType{
    Members: {
        &dts_parser.PropertySignature{
            Name: &dts_parser.Ident{
                Name: "a",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:3},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            TypeAnn: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:13},
                    SourceID: 0,
                },
            },
            Optional: true,
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:13},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:15},
        SourceID: 0,
    },
}
---

[TestOptionalType/object_with_multiple_optional - 1]
&dts_parser.ObjectType{
    Members: {
        &dts_parser.PropertySignature{
            Name: &dts_parser.Ident{
                Name: "a",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:3},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            TypeAnn: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:13},
                    SourceID: 0,
                },
            },
            Optional: true,
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:13},
                SourceID: 0,
            },
        },
        &dts_parser.PropertySignature{
            Name: &dts_parser.Ident{
                Name: "b",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            TypeAnn: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:25},
                    SourceID: 0,
                },
            },
            Optional: true,
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:15},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestOptionalType/object_with_mixed_optional - 1]
&dts_parser.ObjectType{
    Members: {
        &dts_parser.PropertySignature{
            Name: &dts_parser.Ident{
                Name: "a",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:3},
                    End:      ast.Location{Line:1, Column:4},
                    SourceID: 0,
                },
            },
            TypeAnn: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:6},
                    End:      ast.Location{Line:1, Column:12},
                    SourceID: 0,
                },
            },
            Optional: false,
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:3},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
        &dts_parser.PropertySignature{
            Name: &dts_parser.Ident{
                Name: "b",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:14},
                    End:      ast.Location{Line:1, Column:15},
                    SourceID: 0,
                },
            },
            TypeAnn: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:18},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            Optional: true,
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:14},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        &dts_parser.PropertySignature{
            Name: &dts_parser.Ident{
                Name: "c",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:26},
                    End:      ast.Location{Line:1, Column:27},
                    SourceID: 0,
                },
            },
            TypeAnn: &dts_parser.PrimitiveType{
                Kind: 8,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:29},
                    End:      ast.Location{Line:1, Column:36},
                    SourceID: 0,
                },
            },
            Optional: false,
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:26},
                End:      ast.Location{Line:1, Column:36},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:38},
        SourceID: 0,
    },
}
---

[TestOptionalTypeEdgeCases/optional_union - 1]
struct { Type dts_parser.TypeAnn; Errors []*dts_parser.Error }{
    Type: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.UnionType{
                    Types: {
                        &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:2},
                                End:      ast.Location{Line:1, Column:8},
                                SourceID: 0,
                            },
                        },
                        &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:11},
                                End:      ast.Location{Line:1, Column:17},
                                SourceID: 0,
                            },
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:17},
                        SourceID: 0,
                    },
                },
                Optional: true,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:17},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:19},
            SourceID: 0,
        },
    },
    Errors: {
    },
}
---

[TestOptionalTypeEdgeCases/optional_array_type - 1]
struct { Type dts_parser.TypeAnn; Errors []*dts_parser.Error }{
    Type: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.ArrayType{
                    ElementType: &dts_parser.PrimitiveType{
                        Kind: 6,
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:2},
                            End:      ast.Location{Line:1, Column:8},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:10},
                        SourceID: 0,
                    },
                },
                Optional: true,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:12},
            SourceID: 0,
        },
    },
    Errors: {
    },
}
---

[TestOptionalTypeEdgeCases/optional_indexed_access - 1]
struct { Type dts_parser.TypeAnn; Errors []*dts_parser.Error }{
    Type: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.IndexedAccessType{
                    ObjectType: &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "T",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:2},
                                End:      ast.Location{Line:1, Column:3},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:2},
                            End:      ast.Location{Line:1, Column:3},
                            SourceID: 0,
                        },
                    },
                    IndexType: &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "K",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:4},
                                End:      ast.Location{Line:1, Column:5},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:4},
                            End:      ast.Location{Line:1, Column:5},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:6},
                        SourceID: 0,
                    },
                },
                Optional: true,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:6},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    Errors: {
    },
}
---

[TestOptionalTypeEdgeCases/optional_conditional - 1]
struct { Type dts_parser.TypeAnn; Errors []*dts_parser.Error }{
    Type: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.ParenthesizedType{
                    Type: &dts_parser.ConditionalType{
                        CheckType: &dts_parser.TypeReference{
                            Name: &dts_parser.Ident{
                                Name: "T",
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:3},
                                    End:      ast.Location{Line:1, Column:4},
                                    SourceID: 0,
                                },
                            },
                            TypeArgs: nil,
                            span:     ast.Span{
                                Start:    ast.Location{Line:1, Column:3},
                                End:      ast.Location{Line:1, Column:4},
                                SourceID: 0,
                            },
                        },
                        ExtendsType: &dts_parser.TypeReference{
                            Name: &dts_parser.Ident{
                                Name: "U",
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:13},
                                    End:      ast.Location{Line:1, Column:14},
                                    SourceID: 0,
                                },
                            },
                            TypeArgs: nil,
                            span:     ast.Span{
                                Start:    ast.Location{Line:1, Column:13},
                                End:      ast.Location{Line:1, Column:14},
                                SourceID: 0,
                            },
                        },
                        TrueType: &dts_parser.TypeReference{
                            Name: &dts_parser.Ident{
                                Name: "X",
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:17},
                                    End:      ast.Location{Line:1, Column:18},
                                    SourceID: 0,
                                },
                            },
                            TypeArgs: nil,
                            span:     ast.Span{
                                Start:    ast.Location{Line:1, Column:17},
                                End:      ast.Location{Line:1, Column:18},
                                SourceID: 0,
                            },
                        },
                        FalseType: &dts_parser.TypeReference{
                            Name: &dts_parser.Ident{
                                Name: "Y",
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:21},
                                    End:      ast.Location{Line:1, Column:22},
                                    SourceID: 0,
                                },
                            },
                            TypeArgs: nil,
                            span:     ast.Span{
                                Start:    ast.Location{Line:1, Column:21},
                                End:      ast.Location{Line:1, Column:22},
                                SourceID: 0,
                            },
                        },
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:3},
                            End:      ast.Location{Line:1, Column:22},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:23},
                        SourceID: 0,
                    },
                },
                Optional: true,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:25},
            SourceID: 0,
        },
    },
    Errors: {
    },
}
---

[TestOptionalTypeEdgeCases/multiple_question_marks_in_tuple - 1]
struct { Type dts_parser.TypeAnn; Errors []*dts_parser.Error }{
    Type: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.PrimitiveType{
                    Kind: 6,
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:8},
                        SourceID: 0,
                    },
                },
                Optional: true,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:8},
            SourceID: 0,
        },
    },
    Errors: {
        &dts_parser.Error{
            Span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
            Message: "Expected 13 but got 68",
        },
    },
}
---

[TestTemplateLiteralTypes/template_with_string - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateString{
            Value: "hello",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:8},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_with_type - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:4},
                        End:      ast.Location{Line:1, Column:5},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:4},
                    End:      ast.Location{Line:1, Column:5},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:6},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:7},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_with_prefix - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateString{
            Value: "hello ",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:10},
                        End:      ast.Location{Line:1, Column:11},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:10},
                    End:      ast.Location{Line:1, Column:11},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:8},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:13},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_with_suffix - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:4},
                        End:      ast.Location{Line:1, Column:5},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:4},
                    End:      ast.Location{Line:1, Column:5},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:6},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateString{
            Value: " world",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:6},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:13},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_with_multiple_parts - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "A",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:4},
                        End:      ast.Location{Line:1, Column:5},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:4},
                    End:      ast.Location{Line:1, Column:5},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:6},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateString{
            Value: "-",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:6},
                End:      ast.Location{Line:1, Column:7},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "B",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:9},
                        End:      ast.Location{Line:1, Column:10},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:9},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_complex - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateString{
            Value: "Hello, ",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:9},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "First",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:11},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:11},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:17},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateString{
            Value: " ",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:17},
                End:      ast.Location{Line:1, Column:18},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Last",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:20},
                        End:      ast.Location{Line:1, Column:24},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:18},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
        &dts_parser.TemplateString{
            Value: "!",
            span:  ast.Span{
                Start:    ast.Location{Line:1, Column:25},
                End:      ast.Location{Line:1, Column:26},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestTemplateLiteralTypes/template_with_union - 1]
&dts_parser.TemplateLiteralType{
    Parts: {
        &dts_parser.TemplateType{
            Type: &dts_parser.UnionType{
                Types: {
                    &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "T",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:4},
                                End:      ast.Location{Line:1, Column:5},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:4},
                            End:      ast.Location{Line:1, Column:5},
                            SourceID: 0,
                        },
                    },
                    &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "U",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:8},
                                End:      ast.Location{Line:1, Column:9},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:8},
                            End:      ast.Location{Line:1, Column:9},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:4},
                    End:      ast.Location{Line:1, Column:9},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:11},
        SourceID: 0,
    },
}
---

[TestMappedTypes/mapped_with_as_clause - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.IndexedAccessType{
        ObjectType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "T",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:32},
                    End:      ast.Location{Line:1, Column:33},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:32},
                End:      ast.Location{Line:1, Column:33},
                SourceID: 0,
            },
        },
        IndexType: &dts_parser.TypeReference{
            Name: &dts_parser.Ident{
                Name: "K",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:34},
                    End:      ast.Location{Line:1, Column:35},
                    SourceID: 0,
                },
            },
            TypeArgs: nil,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:34},
                End:      ast.Location{Line:1, Column:35},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:32},
            End:      ast.Location{Line:1, Column:36},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: &dts_parser.TemplateLiteralType{
        Parts: {
            &dts_parser.TemplateString{
                Value: "get",
                span:  ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            &dts_parser.TemplateType{
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "K",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:26},
                            End:      ast.Location{Line:1, Column:27},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:26},
                        End:      ast.Location{Line:1, Column:27},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:28},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:20},
            End:      ast.Location{Line:1, Column:29},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:38},
        SourceID: 0,
    },
}
---

[TestComplexAdvancedTypes/Getters_mapped_type - 1]
&dts_parser.MappedType{
    TypeParam: &dts_parser.TypeParam{
        Name: &dts_parser.Ident{
            Name: "K",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:4},
                End:      ast.Location{Line:1, Column:5},
                SourceID: 0,
            },
        },
        Constraint: &dts_parser.KeyOfType{
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:16},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:15},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:9},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        Default: nil,
        span:    ast.Span{
            Start:    ast.Location{Line:1, Column:4},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    ValueType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
        },
        ReturnType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:38},
                        End:      ast.Location{Line:1, Column:39},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:38},
                    End:      ast.Location{Line:1, Column:39},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:40},
                        End:      ast.Location{Line:1, Column:41},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:40},
                    End:      ast.Location{Line:1, Column:41},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:38},
                End:      ast.Location{Line:1, Column:42},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:32},
            End:      ast.Location{Line:1, Column:42},
            SourceID: 0,
        },
    },
    Optional: 0,
    Readonly: 0,
    AsClause: &dts_parser.TemplateLiteralType{
        Parts: {
            &dts_parser.TemplateString{
                Value: "get",
                span:  ast.Span{
                    Start:    ast.Location{Line:1, Column:21},
                    End:      ast.Location{Line:1, Column:24},
                    SourceID: 0,
                },
            },
            &dts_parser.TemplateType{
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "K",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:26},
                            End:      ast.Location{Line:1, Column:27},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:26},
                        End:      ast.Location{Line:1, Column:27},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:24},
                    End:      ast.Location{Line:1, Column:28},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:20},
            End:      ast.Location{Line:1, Column:29},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:44},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:10},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_at_end_of_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:10},
                    End:      ast.Location{Line:1, Column:16},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:10},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:18},
        SourceID: 0,
    },
}
---

[TestOptionalType/multiple_optional_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:8},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:11},
                    End:      ast.Location{Line:1, Column:17},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:17},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.PrimitiveType{
                Kind: 8,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:20},
                    End:      ast.Location{Line:1, Column:27},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:20},
                End:      ast.Location{Line:1, Column:27},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:29},
        SourceID: 0,
    },
}
---

[TestOptionalType/labeled_optional_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: &dts_parser.Ident{
                Name: "x",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:3},
                    SourceID: 0,
                },
            },
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:6},
                    End:      ast.Location{Line:1, Column:12},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:12},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:13},
        SourceID: 0,
    },
}
---

[TestOptionalType/labeled_optional_at_end - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: &dts_parser.Ident{
                Name: "x",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:3},
                    SourceID: 0,
                },
            },
            Type: &dts_parser.PrimitiveType{
                Kind: 6,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:5},
                    End:      ast.Location{Line:1, Column:11},
                    SourceID: 0,
                },
            },
            Optional: false,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
        {
            Name: &dts_parser.Ident{
                Name: "y",
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:13},
                    End:      ast.Location{Line:1, Column:14},
                    SourceID: 0,
                },
            },
            Type: &dts_parser.PrimitiveType{
                Kind: 7,
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:23},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:13},
                End:      ast.Location{Line:1, Column:23},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:24},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_union_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.ParenthesizedType{
                Type: &dts_parser.UnionType{
                    Types: {
                        &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:3},
                                End:      ast.Location{Line:1, Column:9},
                                SourceID: 0,
                            },
                        },
                        &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:12},
                                End:      ast.Location{Line:1, Column:18},
                                SourceID: 0,
                            },
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:3},
                        End:      ast.Location{Line:1, Column:18},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:19},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:19},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:21},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_intersection_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.ParenthesizedType{
                Type: &dts_parser.IntersectionType{
                    Types: {
                        &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:3},
                                End:      ast.Location{Line:1, Column:9},
                                SourceID: 0,
                            },
                        },
                        &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:12},
                                End:      ast.Location{Line:1, Column:18},
                                SourceID: 0,
                            },
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:3},
                        End:      ast.Location{Line:1, Column:18},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:19},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:19},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:21},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_array_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.ArrayType{
                ElementType: &dts_parser.PrimitiveType{
                    Kind: 6,
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:8},
                        SourceID: 0,
                    },
                },
                Readonly: false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_generic_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Array",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:7},
                        SourceID: 0,
                    },
                },
                TypeArgs: {
                    &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "T",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:8},
                                End:      ast.Location{Line:1, Column:9},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:8},
                            End:      ast.Location{Line:1, Column:9},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_function_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.ParenthesizedType{
                Type: &dts_parser.FunctionType{
                    TypeParams: nil,
                    Params:     {
                        &dts_parser.Param{
                            Name: &dts_parser.Ident{
                                Name: "x",
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:4},
                                    End:      ast.Location{Line:1, Column:5},
                                    SourceID: 0,
                                },
                            },
                            Type: &dts_parser.PrimitiveType{
                                Kind: 7,
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:7},
                                    End:      ast.Location{Line:1, Column:13},
                                    SourceID: 0,
                                },
                            },
                            Optional: false,
                            Rest:     false,
                            span:     ast.Span{
                                Start:    ast.Location{Line:1, Column:4},
                                End:      ast.Location{Line:1, Column:13},
                                SourceID: 0,
                            },
                        },
                    },
                    ReturnType: &dts_parser.PrimitiveType{
                        Kind: 6,
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:18},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:3},
                        End:      ast.Location{Line:1, Column:24},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:25},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:25},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:27},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_object_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.ObjectType{
                Members: {
                    &dts_parser.PropertySignature{
                        Name: &dts_parser.Ident{
                            Name: "a",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:4},
                                End:      ast.Location{Line:1, Column:5},
                                SourceID: 0,
                            },
                        },
                        TypeAnn: &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:7},
                                End:      ast.Location{Line:1, Column:13},
                                SourceID: 0,
                            },
                        },
                        Optional: false,
                        Readonly: false,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:4},
                            End:      ast.Location{Line:1, Column:13},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:15},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:15},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:17},
        SourceID: 0,
    },
}
---

[TestOptionalType/optional_tuple_in_tuple - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.TupleType{
                Elements: {
                    {
                        Name: (*dts_parser.Ident)(nil),
                        Type: &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:3},
                                End:      ast.Location{Line:1, Column:9},
                                SourceID: 0,
                            },
                        },
                        Optional: false,
                        Rest:     false,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:3},
                            End:      ast.Location{Line:1, Column:9},
                            SourceID: 0,
                        },
                    },
                    {
                        Name: (*dts_parser.Ident)(nil),
                        Type: &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:11},
                                End:      ast.Location{Line:1, Column:17},
                                SourceID: 0,
                            },
                        },
                        Optional: false,
                        Rest:     false,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:11},
                            End:      ast.Location{Line:1, Column:17},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:18},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:18},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:20},
        SourceID: 0,
    },
}
---

[TestOptionalType/multiple_complex_optional - 1]
&dts_parser.TupleType{
    Elements: {
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Array",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:2},
                        End:      ast.Location{Line:1, Column:7},
                        SourceID: 0,
                    },
                },
                TypeArgs: {
                    &dts_parser.PrimitiveType{
                        Kind: 6,
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:8},
                            End:      ast.Location{Line:1, Column:14},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:2},
                    End:      ast.Location{Line:1, Column:15},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:2},
                End:      ast.Location{Line:1, Column:15},
                SourceID: 0,
            },
        },
        {
            Name: (*dts_parser.Ident)(nil),
            Type: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "Map",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:18},
                        End:      ast.Location{Line:1, Column:21},
                        SourceID: 0,
                    },
                },
                TypeArgs: {
                    &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "K",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:22},
                                End:      ast.Location{Line:1, Column:23},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:22},
                            End:      ast.Location{Line:1, Column:23},
                            SourceID: 0,
                        },
                    },
                    &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "V",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:25},
                                End:      ast.Location{Line:1, Column:26},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: nil,
                        span:     ast.Span{
                            Start:    ast.Location{Line:1, Column:25},
                            End:      ast.Location{Line:1, Column:26},
                            SourceID: 0,
                        },
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:18},
                    End:      ast.Location{Line:1, Column:27},
                    SourceID: 0,
                },
            },
            Optional: true,
            Rest:     false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:18},
                End:      ast.Location{Line:1, Column:27},
                SourceID: 0,
            },
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:29},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_with_string_constraint - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Array",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:23},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    Constraint: &dts_parser.PrimitiveType{
                        Kind: 6,
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:33},
                            End:      ast.Location{Line:1, Column:39},
                            SourceID: 0,
                        },
                    },
                    Default: nil,
                    span:    ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:39},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:39},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:40},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:43},
                End:      ast.Location{Line:1, Column:44},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:43},
            End:      ast.Location{Line:1, Column:44},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:47},
            End:      ast.Location{Line:1, Column:52},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:52},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_with_number_constraint - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "arg",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:15},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:23},
                                End:      ast.Location{Line:1, Column:24},
                                SourceID: 0,
                            },
                        },
                        Constraint: &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:33},
                                End:      ast.Location{Line:1, Column:39},
                                SourceID: 0,
                            },
                        },
                        Default: nil,
                        span:    ast.Span{
                            Start:    ast.Location{Line:1, Column:17},
                            End:      ast.Location{Line:1, Column:39},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:39},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:39},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:50},
                        End:      ast.Location{Line:1, Column:51},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:44},
                    End:      ast.Location{Line:1, Column:51},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:44},
                End:      ast.Location{Line:1, Column:51},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:51},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "R",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:54},
                End:      ast.Location{Line:1, Column:55},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:54},
            End:      ast.Location{Line:1, Column:55},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 0,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:58},
            End:      ast.Location{Line:1, Column:61},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:61},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_with_object_constraint - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Array",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:23},
                            End:      ast.Location{Line:1, Column:24},
                            SourceID: 0,
                        },
                    },
                    Constraint: &dts_parser.ObjectType{
                        Members: {
                            &dts_parser.PropertySignature{
                                Name: &dts_parser.Ident{
                                    Name: "name",
                                    span: ast.Span{
                                        Start:    ast.Location{Line:1, Column:35},
                                        End:      ast.Location{Line:1, Column:39},
                                        SourceID: 0,
                                    },
                                },
                                TypeAnn: &dts_parser.PrimitiveType{
                                    Kind: 6,
                                    span: ast.Span{
                                        Start:    ast.Location{Line:1, Column:41},
                                        End:      ast.Location{Line:1, Column:47},
                                        SourceID: 0,
                                    },
                                },
                                Optional: false,
                                Readonly: false,
                                span:     ast.Span{
                                    Start:    ast.Location{Line:1, Column:35},
                                    End:      ast.Location{Line:1, Column:47},
                                    SourceID: 0,
                                },
                            },
                        },
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:33},
                            End:      ast.Location{Line:1, Column:49},
                            SourceID: 0,
                        },
                    },
                    Default: nil,
                    span:    ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:49},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:17},
                    End:      ast.Location{Line:1, Column:49},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:50},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:53},
                End:      ast.Location{Line:1, Column:54},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:53},
            End:      ast.Location{Line:1, Column:54},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:57},
            End:      ast.Location{Line:1, Column:62},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:62},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_with_union_constraint - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Promise",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:18},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:25},
                            End:      ast.Location{Line:1, Column:26},
                            SourceID: 0,
                        },
                    },
                    Constraint: &dts_parser.UnionType{
                        Types: {
                            &dts_parser.PrimitiveType{
                                Kind: 6,
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:35},
                                    End:      ast.Location{Line:1, Column:41},
                                    SourceID: 0,
                                },
                            },
                            &dts_parser.PrimitiveType{
                                Kind: 7,
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:44},
                                    End:      ast.Location{Line:1, Column:50},
                                    SourceID: 0,
                                },
                            },
                        },
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:35},
                            End:      ast.Location{Line:1, Column:50},
                            SourceID: 0,
                        },
                    },
                    Default: nil,
                    span:    ast.Span{
                        Start:    ast.Location{Line:1, Column:19},
                        End:      ast.Location{Line:1, Column:50},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:50},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:51},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "U",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:54},
                End:      ast.Location{Line:1, Column:55},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:54},
            End:      ast.Location{Line:1, Column:55},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:58},
                End:      ast.Location{Line:1, Column:59},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:58},
            End:      ast.Location{Line:1, Column:59},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:59},
        SourceID: 0,
    },
}
---

[TestInferTypes/infer_with_array_constraint - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "arg",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:15},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:23},
                                End:      ast.Location{Line:1, Column:24},
                                SourceID: 0,
                            },
                        },
                        Constraint: &dts_parser.ArrayType{
                            ElementType: &dts_parser.PrimitiveType{
                                Kind: 0,
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:33},
                                    End:      ast.Location{Line:1, Column:36},
                                    SourceID: 0,
                                },
                            },
                            Readonly: false,
                            span:     ast.Span{
                                Start:    ast.Location{Line:1, Column:33},
                                End:      ast.Location{Line:1, Column:38},
                                SourceID: 0,
                            },
                        },
                        Default: nil,
                        span:    ast.Span{
                            Start:    ast.Location{Line:1, Column:17},
                            End:      ast.Location{Line:1, Column:38},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:17},
                        End:      ast.Location{Line:1, Column:38},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:38},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:49},
                        End:      ast.Location{Line:1, Column:50},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:43},
                    End:      ast.Location{Line:1, Column:50},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:43},
                End:      ast.Location{Line:1, Column:50},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:50},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "R",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:53},
                End:      ast.Location{Line:1, Column:54},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:53},
            End:      ast.Location{Line:1, Column:54},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 0,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:57},
            End:      ast.Location{Line:1, Column:60},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:60},
        SourceID: 0,
    },
}
---

[TestInferTypes/multiple_infer_with_constraints - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.FunctionType{
        TypeParams: nil,
        Params:     {
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "a",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:12},
                        End:      ast.Location{Line:1, Column:13},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "A",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:21},
                                End:      ast.Location{Line:1, Column:22},
                                SourceID: 0,
                            },
                        },
                        Constraint: &dts_parser.PrimitiveType{
                            Kind: 6,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:31},
                                End:      ast.Location{Line:1, Column:37},
                                SourceID: 0,
                            },
                        },
                        Default: nil,
                        span:    ast.Span{
                            Start:    ast.Location{Line:1, Column:15},
                            End:      ast.Location{Line:1, Column:37},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:15},
                        End:      ast.Location{Line:1, Column:37},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:12},
                    End:      ast.Location{Line:1, Column:37},
                    SourceID: 0,
                },
            },
            &dts_parser.Param{
                Name: &dts_parser.Ident{
                    Name: "b",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:39},
                        End:      ast.Location{Line:1, Column:40},
                        SourceID: 0,
                    },
                },
                Type: &dts_parser.InferType{
                    TypeParam: &dts_parser.TypeParam{
                        Name: &dts_parser.Ident{
                            Name: "B",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:48},
                                End:      ast.Location{Line:1, Column:49},
                                SourceID: 0,
                            },
                        },
                        Constraint: &dts_parser.PrimitiveType{
                            Kind: 7,
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:58},
                                End:      ast.Location{Line:1, Column:64},
                                SourceID: 0,
                            },
                        },
                        Default: nil,
                        span:    ast.Span{
                            Start:    ast.Location{Line:1, Column:42},
                            End:      ast.Location{Line:1, Column:64},
                            SourceID: 0,
                        },
                    },
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:42},
                        End:      ast.Location{Line:1, Column:64},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:39},
                    End:      ast.Location{Line:1, Column:64},
                    SourceID: 0,
                },
            },
        },
        ReturnType: &dts_parser.InferType{
            TypeParam: &dts_parser.TypeParam{
                Name: &dts_parser.Ident{
                    Name: "R",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:75},
                        End:      ast.Location{Line:1, Column:76},
                        SourceID: 0,
                    },
                },
                Constraint: nil,
                Default:    nil,
                span:       ast.Span{
                    Start:    ast.Location{Line:1, Column:69},
                    End:      ast.Location{Line:1, Column:76},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:69},
                End:      ast.Location{Line:1, Column:76},
                SourceID: 0,
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:76},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TupleType{
        Elements: {
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "A",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:80},
                            End:      ast.Location{Line:1, Column:81},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:80},
                        End:      ast.Location{Line:1, Column:81},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:80},
                    End:      ast.Location{Line:1, Column:81},
                    SourceID: 0,
                },
            },
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "B",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:83},
                            End:      ast.Location{Line:1, Column:84},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:83},
                        End:      ast.Location{Line:1, Column:84},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:83},
                    End:      ast.Location{Line:1, Column:84},
                    SourceID: 0,
                },
            },
            {
                Name: (*dts_parser.Ident)(nil),
                Type: &dts_parser.TypeReference{
                    Name: &dts_parser.Ident{
                        Name: "R",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:86},
                            End:      ast.Location{Line:1, Column:87},
                            SourceID: 0,
                        },
                    },
                    TypeArgs: nil,
                    span:     ast.Span{
                        Start:    ast.Location{Line:1, Column:86},
                        End:      ast.Location{Line:1, Column:87},
                        SourceID: 0,
                    },
                },
                Optional: false,
                Rest:     false,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:86},
                    End:      ast.Location{Line:1, Column:87},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:79},
            End:      ast.Location{Line:1, Column:88},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.PrimitiveType{
        Kind: 5,
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:91},
            End:      ast.Location{Line:1, Column:96},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:96},
        SourceID: 0,
    },
}
---

[TestInferTypes/nested_infer_with_constraints - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:1},
                End:      ast.Location{Line:1, Column:2},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:2},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Promise",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:11},
                End:      ast.Location{Line:1, Column:18},
                SourceID: 0,
            },
        },
        TypeArgs: {
            &dts_parser.InferType{
                TypeParam: &dts_parser.TypeParam{
                    Name: &dts_parser.Ident{
                        Name: "U",
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:25},
                            End:      ast.Location{Line:1, Column:26},
                            SourceID: 0,
                        },
                    },
                    Constraint: &dts_parser.TypeReference{
                        Name: &dts_parser.Ident{
                            Name: "Array",
                            span: ast.Span{
                                Start:    ast.Location{Line:1, Column:35},
                                End:      ast.Location{Line:1, Column:40},
                                SourceID: 0,
                            },
                        },
                        TypeArgs: {
                            &dts_parser.InferType{
                                TypeParam: &dts_parser.TypeParam{
                                    Name: &dts_parser.Ident{
                                        Name: "V",
                                        span: ast.Span{
                                            Start:    ast.Location{Line:1, Column:47},
                                            End:      ast.Location{Line:1, Column:48},
                                            SourceID: 0,
                                        },
                                    },
                                    Constraint: &dts_parser.PrimitiveType{
                                        Kind: 6,
                                        span: ast.Span{
                                            Start:    ast.Location{Line:1, Column:57},
                                            End:      ast.Location{Line:1, Column:63},
                                            SourceID: 0,
                                        },
                                    },
                                    Default: nil,
                                    span:    ast.Span{
                                        Start:    ast.Location{Line:1, Column:41},
                                        End:      ast.Location{Line:1, Column:63},
                                        SourceID: 0,
                                    },
                                },
                                span: ast.Span{
                                    Start:    ast.Location{Line:1, Column:41},
                                    End:      ast.Location{Line:1, Column:63},
                                    SourceID: 0,
                                },
                            },
                        },
                        span: ast.Span{
                            Start:    ast.Location{Line:1, Column:35},
                            End:      ast.Location{Line:1, Column:64},
                            SourceID: 0,
                        },
                    },
                    Default: nil,
                    span:    ast.Span{
                        Start:    ast.Location{Line:1, Column:19},
                        End:      ast.Location{Line:1, Column:64},
                        SourceID: 0,
                    },
                },
                span: ast.Span{
                    Start:    ast.Location{Line:1, Column:19},
                    End:      ast.Location{Line:1, Column:64},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:11},
            End:      ast.Location{Line:1, Column:65},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "V",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:68},
                End:      ast.Location{Line:1, Column:69},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:68},
            End:      ast.Location{Line:1, Column:69},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "T",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:72},
                End:      ast.Location{Line:1, Column:73},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:72},
            End:      ast.Location{Line:1, Column:73},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:73},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/union_then_conditional - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.UnionType{
        Types: {
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:1},
                        End:      ast.Location{Line:1, Column:2},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:1},
                    End:      ast.Location{Line:1, Column:2},
                    SourceID: 0,
                },
            },
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "U",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:5},
                        End:      ast.Location{Line:1, Column:6},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:5},
                    End:      ast.Location{Line:1, Column:6},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:6},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "V",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:15},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:15},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "X",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:20},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Y",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:23},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:24},
        SourceID: 0,
    },
}
---

[TestConditionalTypes/intersection_then_conditional - 1]
&dts_parser.ConditionalType{
    CheckType: &dts_parser.IntersectionType{
        Types: {
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:1},
                        End:      ast.Location{Line:1, Column:2},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:1},
                    End:      ast.Location{Line:1, Column:2},
                    SourceID: 0,
                },
            },
            &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "U",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:5},
                        End:      ast.Location{Line:1, Column:6},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:5},
                    End:      ast.Location{Line:1, Column:6},
                    SourceID: 0,
                },
            },
        },
        span: ast.Span{
            Start:    ast.Location{Line:1, Column:1},
            End:      ast.Location{Line:1, Column:6},
            SourceID: 0,
        },
    },
    ExtendsType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "V",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:15},
                End:      ast.Location{Line:1, Column:16},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:15},
            End:      ast.Location{Line:1, Column:16},
            SourceID: 0,
        },
    },
    TrueType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "X",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:19},
                End:      ast.Location{Line:1, Column:20},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:19},
            End:      ast.Location{Line:1, Column:20},
            SourceID: 0,
        },
    },
    FalseType: &dts_parser.TypeReference{
        Name: &dts_parser.Ident{
            Name: "Y",
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:23},
                End:      ast.Location{Line:1, Column:24},
                SourceID: 0,
            },
        },
        TypeArgs: nil,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:23},
            End:      ast.Location{Line:1, Column:24},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:24},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_nested_array - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.ArrayType{
        ElementType: &dts_parser.ArrayType{
            ElementType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:7},
                        End:      ast.Location{Line:1, Column:8},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            Readonly: false,
            span:     ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:10},
                SourceID: 0,
            },
        },
        Readonly: false,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:12},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:12},
        SourceID: 0,
    },
}
---

[TestKeyOfTypes/keyof_indexed_then_array - 1]
&dts_parser.KeyOfType{
    Type: &dts_parser.ArrayType{
        ElementType: &dts_parser.IndexedAccessType{
            ObjectType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "T",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:7},
                        End:      ast.Location{Line:1, Column:8},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:7},
                    End:      ast.Location{Line:1, Column:8},
                    SourceID: 0,
                },
            },
            IndexType: &dts_parser.TypeReference{
                Name: &dts_parser.Ident{
                    Name: "K",
                    span: ast.Span{
                        Start:    ast.Location{Line:1, Column:9},
                        End:      ast.Location{Line:1, Column:10},
                        SourceID: 0,
                    },
                },
                TypeArgs: nil,
                span:     ast.Span{
                    Start:    ast.Location{Line:1, Column:9},
                    End:      ast.Location{Line:1, Column:10},
                    SourceID: 0,
                },
            },
            span: ast.Span{
                Start:    ast.Location{Line:1, Column:7},
                End:      ast.Location{Line:1, Column:11},
                SourceID: 0,
            },
        },
        Readonly: false,
        span:     ast.Span{
            Start:    ast.Location{Line:1, Column:7},
            End:      ast.Location{Line:1, Column:13},
            SourceID: 0,
        },
    },
    span: ast.Span{
        Start:    ast.Location{Line:1, Column:1},
        End:      ast.Location{Line:1, Column:13},
        SourceID: 0,
    },
}
---
